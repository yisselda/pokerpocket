<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PokerPocket Engine Demo</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="hero-enhancements.css" />
  </head>
  <body>
    <main>
      <header id="hero" class="hero">
        <div class="hero-content">
          <div class="hero-badges">
            <div class="badge-group">
              <a
                href="https://github.com/yisselda/pokerpocket"
                class="github-badge"
                target="_blank"
                rel="noopener"
                aria-label="Open PokerPocket repository on GitHub"
              >
                <span class="badge-icon">‚≠ê</span>
                <span class="badge-text">Star on GitHub</span>
              </a>
              <div class="badge npm-badge">
                <span class="badge-icon">üì¶</span>
                <span class="badge-text">@pokerpocket/engine</span>
              </div>
              <div class="badge performance-badge">
                <span class="badge-icon">üß†</span>
                <span class="badge-text">Pure reducer core</span>
              </div>
            </div>
          </div>

          <h1 class="hero-title">PokerPocket</h1>
          <p class="hero-subtitle">
            Fast, deterministic Texas Hold'em reducer for JavaScript and
            TypeScript. Zero runtime dependencies, plug into any loop or UI.
          </p>

          <div class="hero-code-preview">
            <div class="hero-tabs">
              <button
                class="hero-tab active"
                onclick="switchHeroTab('cli')"
                id="hero-cli-tab"
              >
                üöÄ CLI Quickstart
              </button>
              <button
                class="hero-tab"
                onclick="switchHeroTab('api')"
                id="hero-api-tab"
              >
                ‚ö° Pure Reducer API
              </button>
            </div>

            <div class="hero-code-content active" id="hero-cli-content">
              <div class="hero-terminal">
                <div class="terminal-prompt">$</div>
                <div class="terminal-command">npm install @pokerpocket/engine</div>
              </div>
              <div class="hero-features">
                ‚úì Deterministic RNG snapshots<br />
                ‚úì Batteries-included CLI<br />
                ‚úì Works offline, no deps
              </div>
            </div>

            <div class="hero-code-content" id="hero-api-content">
              <div class="hero-api-code">
                <pre><code>import {
  advanceUntilDecision,
  createTable,
  getBoardAscii,
  getSeed,
} from '@pokerpocket/engine'

const state = advanceUntilDecision(
  createTable(6, 20000, 100, { seed: 42 })
)

console.log(getBoardAscii(state))
console.log(getSeed(state))</code></pre>
              </div>
              <div class="hero-features">
                ‚úì Typed selectors & actions<br />
                ‚úì Bring your own transport/UI<br />
                ‚úì Seed in, snapshot out
              </div>
            </div>
          </div>

          <div class="hero-buttons">
            <a href="#demo" class="btn btn-primary">Try Interactive Demo</a>
            <a href="#quick-start" class="btn btn-secondary">Get Started</a>
          </div>

          <div class="hero-quick-links" aria-label="Quick API links">
            <span class="quick-links-label">Quick API links:</span>
            <a
              href="https://github.com/yisselda/pokerpocket?tab=readme-ov-file#actions"
              class="quick-link"
              >Actions</a
            >
            <span aria-hidden="true">¬∑</span>
            <a
              href="https://github.com/yisselda/pokerpocket?tab=readme-ov-file#selectors"
              class="quick-link"
              >Selectors</a
            >
            <span aria-hidden="true">¬∑</span>
            <a
              href="https://github.com/yisselda/pokerpocket?tab=readme-ov-file#utilities"
              class="quick-link"
              >Utilities</a
            >
            <span aria-hidden="true">¬∑</span>
            <a
              href="https://github.com/yisselda/pokerpocket?tab=readme-ov-file#rng"
              class="quick-link"
              >RNG</a
            >
          </div>
        </div>
      </header>

      <section id="demo" class="demo">
        <div class="container">
          <h2>Interactive Playground</h2>
          <p>
            Drive the reducer, inspect hand evaluations, and feel the determinism
            of PokerPocket's engine.
          </p>

          <div class="demo-tabs">
            <button
              class="tab-btn active"
              onclick="switchTab('game-engine')"
              id="tab-game-engine"
            >
              üé≤ Reducer Demo
            </button>
            <button
              class="tab-btn"
              onclick="switchTab('cli-demo')"
              id="tab-cli-demo"
            >
              üíª CLI Walkthrough
            </button>
            <button
              class="tab-btn"
              onclick="switchTab('code-examples')"
              id="tab-code-examples"
            >
              ‚ö° Code Examples
            </button>
          </div>

          <div class="tab-content active" id="content-game-engine">
            <div class="demo-grid">
              <div class="demo-section">
                <h3>Complete Hand Simulation</h3>
                <div class="controls">
                  <label for="live-players">Players:</label>
                  <select id="live-players" aria-label="Number of players">
                    <option value="2">2</option>
                    <option value="3" selected>3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                  </select>
                  <input
                    type="number"
                    id="seed"
                    placeholder="Seed (optional)"
                    min="0"
                  />
                  <button id="deal-btn" onclick="dealLiveHand()">
                    Deal Hand
                  </button>
                  <button id="reset-btn" onclick="resetLiveDemo()">
                    Reset
                  </button>
                </div>
                <div
                  id="live-output"
                  class="demo-output"
                  aria-live="polite"
                  role="region"
                  aria-label="Reducer output"
                >
                  Click "Deal Hand" to simulate a complete Texas Hold'em hand
                  with deterministic RNG.
                </div>
                <div class="demo-links">
                  <a
                    href="https://github.com/yisselda/pokerpocket/tree/main/engine/src"
                    class="demo-link"
                    >üìñ Browse reducer source</a
                  >
                  ‚Ä¢
                  <a
                    href="https://github.com/yisselda/pokerpocket/blob/main/engine/tests"
                    class="demo-link"
                    >‚úÖ Deterministic tests</a
                  >
                </div>
              </div>

              <div class="demo-section">
                <h3>Hand Evaluator</h3>
                <div class="controls">
                  <select id="cardRank">
                    <option value="A">A</option>
                    <option value="K">K</option>
                    <option value="Q">Q</option>
                    <option value="J">J</option>
                    <option value="T">T</option>
                    <option value="9">9</option>
                    <option value="8">8</option>
                    <option value="7">7</option>
                    <option value="6">6</option>
                    <option value="5">5</option>
                    <option value="4">4</option>
                    <option value="3">3</option>
                    <option value="2">2</option>
                  </select>
                  <select id="cardSuit">
                    <option value="s">‚ô†</option>
                    <option value="h">‚ô•</option>
                    <option value="d">‚ô¶</option>
                    <option value="c">‚ô£</option>
                  </select>
                  <button onclick="addCard()">Add Card</button>
                  <button onclick="addRandomCards()">Random 5-7</button>
                  <button onclick="clearCards()">Clear All</button>
                  <button onclick="evaluateHand()" disabled id="evalBtn">
                    Evaluate Hand
                  </button>
                </div>
                <div id="cards" class="card-area"></div>
                <div id="evalResult" class="demo-output">
                  Add 5-7 cards to evaluate
                </div>
              </div>

              <div class="demo-section">
                <h3>Reducer Micro-Benchmark</h3>
                <div class="controls">
                  <button id="bench-btn" onclick="runBenchmark()">
                    Run 500 Hands
                  </button>
                </div>
                <div id="benchResult" class="demo-output">
                  Measure how many deterministic hands the reducer can process
                  on your device.
                </div>
              </div>
            </div>
          </div>

          <div class="tab-content" id="content-cli-demo">
            <div class="cli-demo">
              <h3>Command Line Interface</h3>
              <p>
                The package ships with a zero-dependency CLI that wraps the same
                reducer powering the API.
              </p>

              <div class="terminal-demo">
                <div class="terminal-header">
                  <span class="terminal-title">Terminal</span>
                  <div class="terminal-controls">
                    <span class="terminal-dot red"></span>
                    <span class="terminal-dot yellow"></span>
                    <span class="terminal-dot green"></span>
                  </div>
                </div>
                <div class="terminal-body">
                  <div class="terminal-line">
                    <span class="terminal-prompt">$</span>
                    <span class="terminal-command">npx @pokerpocket/engine --seed 42</span>
                  </div>
                  <div class="terminal-output">
                    üÉè PokerPocket CLI ‚Äî quick demo client for @pokerpocket/engine
                    Number of players [2]: 3
                    Starting stack [1000]: 20000
                    Big blind size [50]: 100
                    Using RNG seed 42

                    === Phase: PREFLOP ===
                    -&gt; [BTN] P1 | stack: 20000 | bet: 0 | hole: 5h 4d
                       [SB] P2 | stack: 19950 | bet: 50 | hole: 3s 6d
                       [BB] P3 | stack: 19900 | bet: 100 | hole: 9s 2h
                    RNG: 926721163

                    P1's turn. Available: (f)old, (c)all 100, (r) raise to 200-20000, (q)uit
                    Action: c
                  </div>
                </div>
              </div>

              <div class="cli-features">
                <div class="cli-feature">
                  <h4>üéØ Deterministic runs</h4>
                  <p>Seed, serialize, and resume reducer state at any point.</p>
                </div>
                <div class="cli-feature">
                  <h4>üîß Dev tooling</h4>
                  <p>Introspect players, board, pots, and RNG snapshots live.</p>
                </div>
                <div class="cli-feature">
                  <h4>üìà Integration ready</h4>
                  <p>Mirror the CLI flows when wiring bots, clients, or tests.</p>
                </div>
              </div>

              <div class="try-cli">
                <button onclick="showCliInstall()" class="btn btn-primary">
                  üöÄ Try CLI Now
                </button>
                <div
                  id="cli-install"
                  class="cli-install-instructions"
                  style="display: none"
                >
                  <div class="code-block">
                    <div class="code-header">
                      <span class="code-title">
                        Quick Start ‚Äî deterministic hand from the CLI
                      </span>
                      <button onclick="copyCliCommand()" class="copy-btn">
                        <span id="cli-copy-text">Copy</span>
                      </button>
                    </div>
                    <pre class="code-content"><code>npx @pokerpocket/engine --seed 42</code></pre>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="tab-content" id="content-code-examples">
            <div class="code-examples">
              <h3>Integration Examples</h3>
              <p>
                Drop the reducer into different environments. Determinism makes
                tests and replay tooling effortless.
              </p>

              <div class="example-tabs">
                <button
                  class="example-btn active"
                  onclick="switchExample('basic')"
                  id="ex-basic"
                >
                  Basic Usage
                </button>
                <button
                  class="example-btn"
                  onclick="switchExample('react')"
                  id="ex-react"
                >
                  React
                </button>
                <button
                  class="example-btn"
                  onclick="switchExample('node')"
                  id="ex-node"
                >
                  Node.js
                </button>
                <button
                  class="example-btn"
                  onclick="switchExample('typescript')"
                  id="ex-typescript"
                >
                  TypeScript
                </button>
              </div>

              <div class="example-content active" id="example-basic">
                <div class="code-block">
                  <div class="code-header">
                    <span class="code-title">Pure reducer loop</span>
                    <button
                      id="copy-basic"
                      onclick="copyExample('basic')"
                      class="copy-btn"
                    >
                      Copy
                    </button>
                  </div>
                  <pre class="code-content"><code>import {
  advanceUntilDecision,
  call,
  check,
  createTable,
  getActionOptions,
  isHandDone,
  reduce,
} from '@pokerpocket/engine'

let state = advanceUntilDecision(createTable(3, 20000, 100))

while (!isHandDone(state)) {
  const options = getActionOptions(state)
  if (!options) break
  const action = options.canCheck ? check(options.seat) : call(options.seat)
  state = advanceUntilDecision(reduce(state, action))
}

console.log(state.tag) // "COMPLETE"</code></pre>
                </div>
              </div>

              <div class="example-content" id="example-react">
                <div class="code-block">
                  <div class="code-header">
                    <span class="code-title">React hook</span>
                    <button
                      id="copy-react"
                      onclick="copyExample('react')"
                      class="copy-btn"
                    >
                      Copy
                    </button>
                  </div>
                  <pre class="code-content"><code>import {
  advanceUntilDecision,
  createTable,
  reduce,
} from '@pokerpocket/engine'

const usePoker = (players = 6) => {
  const [state, setState] = useState(() =>
    advanceUntilDecision(createTable(players, 20000, 100))
  )

  const dispatch = useCallback(action => {
    setState(prev => advanceUntilDecision(reduce(prev, action)))
  }, [])

  return { state, dispatch }
}</code></pre>
                </div>
              </div>

              <div class="example-content" id="example-node">
                <div class="code-block">
                  <div class="code-header">
                    <span class="code-title">Node.js bot loop</span>
                    <button
                      id="copy-node"
                      onclick="copyExample('node')"
                      class="copy-btn"
                    >
                      Copy
                    </button>
                  </div>
                  <pre class="code-content"><code>import {
  advanceUntilDecision,
  check,
  createTable,
  getActionOptions,
  reduce,
} from '@pokerpocket/engine'

let state = advanceUntilDecision(createTable(3, 5000, 50, { seed: 9 }))
const options = getActionOptions(state)
if (options?.canCheck) {
  state = advanceUntilDecision(reduce(state, check(options.seat)))
}

console.log(state.tag)</code></pre>
                </div>
              </div>

              <div class="example-content" id="example-typescript">
                <div class="code-block">
                  <div class="code-header">
                    <span class="code-title">Strongly typed actions</span>
                    <button
                      id="copy-typescript"
                      onclick="copyExample('typescript')"
                      class="copy-btn"
                    >
                      Copy
                    </button>
                  </div>
                  <pre class="code-content"><code>import { reduce } from '@pokerpocket/engine'
import type { Action, GameState } from '@pokerpocket/engine'

function apply(state: GameState, action: Action) {
  return reduce(state, action)
}</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="quick-start" class="quick-start">
        <div class="container">
          <h2>Quick Start</h2>
          <p>
            Install the engine, run the CLI, or embed the reducer in your stack.
          </p>
          <div class="code-block">
            <div class="code-header">
              <span class="code-title">CLI & library in two commands</span>
              <button id="copy-cli-quick" onclick="copyQuickStart()" class="copy-btn">
                Copy
              </button>
            </div>
            <pre class="code-content"><code>npm install @pokerpocket/engine
npx @pokerpocket/engine --seed 42</code></pre>
          </div>
        </div>
      </section>
    </main>

    <script type="module" src="tab-functions.js"></script>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
